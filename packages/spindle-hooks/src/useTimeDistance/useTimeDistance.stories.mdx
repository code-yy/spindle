import { useCallback } from 'react';
import { Description, Meta, Story, Source } from '@storybook/addon-docs/blocks';
import { actions } from '@storybook/addon-actions';
import { useTimeDistance } from './useTimeDistance';

export const Time = ({ date, options }) => {
  const [dateString] = useTimeDistance(date, options);
  return <time datetime={date}>{dateString}</time>;
};

# useTimeDistance

<Meta title="useTimeDistance" component={Time} />

![stability-experiment](https://img.shields.io/badge/stability-experiment-red.svg)

<Description>時間表示を行うHooksです。</Description>

以下のような表示を自動で行います。

- (何らかの理由で)投稿時間が未来 「たった今」
- 1 分未満　「{ss}秒前」
- 1 時間未満「{mm}分前」
- 1 日未満　「{h}時間前」
- 2 日未満　「昨日 {h}:{mm}」
- 3 日未満　「◯ 曜日 {h}:{mm}」
- 1 年未満　「{M}月{D}日 {h}:{mm}」
- それ以降 「{YYYY}年{M}月{D}日」

この Hooks では以下のオプションを利用できます。

- interval: number - 日付を更新するインターバル、デフォルトでは計算結果によりよしなに更新する予定
- locale: string - おそらく`ja`だけ対応、最初はなくていいかも
- relativeDate: Date - 基準値を変更したい場合、指定しない場合は端末上の今からの基準

この Hooks を使用するには以下のように読み込んでください。

<Source
  language="javascript"
  code={`import { useTimeDistance } from '@openameba/spindle-hooks'`}
/>

## Normal

<Preview withSource="open">
  <Story name="Normal">
    <Time date="2022-05-10T01:15:51.237Z" />
  </Story>
</Preview>

<Source
  code={`
const Time = () => {
  const [dateString] = useTimeDistance("2022-03-11T01:15:51.237Z");
  return <time datetime={publishedAt}>{dateString}</time>;
};
  `}
/>

## Interval

**TODO**
