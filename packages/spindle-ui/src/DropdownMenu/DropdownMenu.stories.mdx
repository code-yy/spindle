import { Description, Meta, Story, Source } from '@storybook/addon-docs/blocks';
import { DropdownMenu } from './DropdownMenu';
import {
  Text,
  TextWithIcon,
  HeadWithIcon,
  HeadWithIconAndCaption,
} from './DropdownMenu.stories.example';

# DropdownMenu

<Meta title="DropdownMenu" component={DropdownMenu} />

![stability-unstable](https://img.shields.io/badge/stability-unstable-yellow.svg)

<Description>
  - `DropdownMenu.List`は`open`プロパティの値を見て、開閉を行います。`onClick`や`onClose`内で`open`プロパティを変更してください
</Description>
<Description>
  - DropdownMenuをボタンに対して左側に開くか右側に開くかは、`DropdownMenu.List`の`position`プロパティに指定してください。デフォルトは`left`です
</Description>
<Description>
  - DropdownMenuのコンテンツの種類は、`DropdownMenu.List`の`variant`プロパティに指定してください。デフォルトは`text`です
</Description>

<Source
  language='javascript'
  code={`import { DropdownMenu } from '@openameba/spindle-ui'`}
/>

<Source
  language='css'
  code={`@import './node_modules/@openameba/spindle-ui/DropdownMenu/DropdownMenu.css'`}
/>

<Source
  language='html'
  code={`<link rel="stylesheet" href="https://unpkg.com/@openameba/spindle-ui/DropdownMenu/DropdownMenu.css">`}
/>

## Text
<Description>テキストのみのDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Text">
    <Text />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example1"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example1"
        onClose={onClose}
        open={open}
        position="right"
        triggerRef={triggerRef}
        variant="text"
      >
        <DropdownMenu.ListItem {...actions('onClick')}>
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem {...actions('onClick')}>
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>

## Text With Icon（1line 44px）
<Description>各アイテムの高さが44pxのアイコン付きDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Text With Icon">
    <TextWithIcon />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example2"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example2"
        onClose={onClose}
        open={open}
        position="right"
        triggerRef={triggerRef}
        variant="textWithIcon"
      >
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>

## Head With Icon（1line 56px）
<Description>各アイテムの高さが56pxのアイコン付きDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Head With Icon">
    <HeadWithIcon />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example3"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example3"
        onClose={onClose}
        open={open}
        position="right"
        triggerRef={triggerRef}
        variant="headWithIcon"
      >
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>

## Head With Icon And Caption
<Description>アイコンとキャプション付きDropdownMenuです</Description>

<Preview withSource="open">
  <Story name="Head With Icon And Caption">
    <HeadWithIconAndCaption />
  </Story>
</Preview>

<Source
  code={`
const [open, setOpen] = useState(false);
const triggerRef = useRef<HTMLButtonElement>(null);
const onClick = () => {
  setOpen((prevOpen) => !prevOpen);
};
const onClose = () => {
  setOpen(false);
};
return (
  <>
    <DropdownMenu.Frame>
      <Button
        aria-controls="dropdown-menu-example4"
        aria-expanded={open}
        onClick={onClick}
        ref={triggerRef}
        size="medium"
        variant="neutral"
      >
        開く
      </Button>
      <DropdownMenu.List
        id="dropdown-menu-example4"
        onClose={onClose}
        open={open}
        position="right"
        triggerRef={triggerRef}
        variant="headWithIconAndCaption"
      >
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
          <DropdownMenu.Caption>キャプションですよ</DropdownMenu.Caption>
        </DropdownMenu.ListItem>
        <DropdownMenu.ListItem
          icon={<AllFill aria-hidden="true" />}
          {...actions('onClick')}
        >
          <DropdownMenu.Title>タイトルですよ</DropdownMenu.Title>
          <DropdownMenu.Caption>キャプションですよ</DropdownMenu.Caption>
        </DropdownMenu.ListItem>
      </DropdownMenu.List>
    </DropdownMenu.Frame>
  </>
);
  `}
/>
